{
    "bug_id": 51,
    "test_id": 0,
    "test_name": "org.apache.commons.lang.BooleanUtilsTest.test_toBoolean_String",
    "test_body": "public void test_toBoolean_String() {\nassertEquals(false, BooleanUtils.toBoolean((String) null));\nassertEquals(false, BooleanUtils.toBoolean(\"\"));\nassertEquals(false, BooleanUtils.toBoolean(\"off\"));\nassertEquals(false, BooleanUtils.toBoolean(\"oof\"));\nassertEquals(false, BooleanUtils.toBoolean(\"yep\"));\nassertEquals(false, BooleanUtils.toBoolean(\"trux\"));\nassertEquals(false, BooleanUtils.toBoolean(\"false\"));\nassertEquals(false, BooleanUtils.toBoolean(\"a\"));\nassertEquals(true, BooleanUtils.toBoolean(\"true\")); // interned handled differently\nassertEquals(true, BooleanUtils.toBoolean(new StringBuffer(\"tr\").append(\"ue\").toString()));\nassertEquals(true, BooleanUtils.toBoolean(\"truE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"trUe\"));\nassertEquals(true, BooleanUtils.toBoolean(\"trUE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"tRue\"));\nassertEquals(true, BooleanUtils.toBoolean(\"tRuE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"tRUe\"));\nassertEquals(true, BooleanUtils.toBoolean(\"tRUE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TRUE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TRUe\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TRuE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TRue\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TrUE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TrUe\"));\nassertEquals(true, BooleanUtils.toBoolean(\"TruE\"));\nassertEquals(true, BooleanUtils.toBoolean(\"True\"));\nassertEquals(true, BooleanUtils.toBoolean(\"on\"));\nassertEquals(true, BooleanUtils.toBoolean(\"oN\"));\nassertEquals(true, BooleanUtils.toBoolean(\"On\"));\nassertEquals(true, BooleanUtils.toBoolean(\"ON\"));\nassertEquals(true, BooleanUtils.toBoolean(\"yes\"));\nassertEquals(true, BooleanUtils.toBoolean(\"yeS\"));\nassertEquals(true, BooleanUtils.toBoolean(\"yEs\"));\nassertEquals(true, BooleanUtils.toBoolean(\"yES\"));\nassertEquals(true, BooleanUtils.toBoolean(\"Yes\"));\nassertEquals(true, BooleanUtils.toBoolean(\"YeS\"));\nassertEquals(true, BooleanUtils.toBoolean(\"YEs\"));\nassertEquals(true, BooleanUtils.toBoolean(\"YES\"));\nassertEquals(false, BooleanUtils.toBoolean(\"yes?\"));\nassertEquals(false, BooleanUtils.toBoolean(\"tru\"));\n}\n",
    "stack_trace": "java.lang.StringIndexOutOfBoundsException: String index out of range: 3\nat java.lang.String.charAt(String.java:658)\nat org.apache.commons.lang.BooleanUtils.toBoolean(BooleanUtils.java:686)\nat org.apache.commons.lang.BooleanUtilsTest.test_toBoolean_String(BooleanUtilsTest.java:334)",
    "covered_methods": [
        {
            "method_signature": "org.apache.commons.lang.BooleanUtils:toBoolean(Ljava/lang/String;)Z",
            "method_body": "public static boolean toBoolean(String str) {\n// Previously used equalsIgnoreCase, which was fast for interned 'true'.\n// Non interned 'true' matched 15 times slower.\n//\n// Optimisation provides same performance as before for interned 'true'.\n// Similar performance for null, 'false', and other strings not length 2/3/4.\n// 'true'/'TRUE' match 4 times slower, 'tRUE'/'True' 7 times slower.\nif (str == \"true\") {\nreturn true;\n}\nif (str == null) {\nreturn false;\n}\nswitch (str.length()) {\ncase 2: {\nchar ch0 = str.charAt(0);\nchar ch1 = str.charAt(1);\nreturn\n(ch0 == 'o' || ch0 == 'O') &&\n(ch1 == 'n' || ch1 == 'N');\n}\ncase 3: {\nchar ch = str.charAt(0);\nif (ch == 'y') {\nreturn\n(str.charAt(1) == 'e' || str.charAt(1) == 'E') &&\n(str.charAt(2) == 's' || str.charAt(2) == 'S');\n}\nif (ch == 'Y') {\nreturn\n(str.charAt(1) == 'E' || str.charAt(1) == 'e') &&\n(str.charAt(2) == 'S' || str.charAt(2) == 's');\n}\n}\ncase 4: {\nchar ch = str.charAt(0);\nif (ch == 't') {\nreturn\n(str.charAt(1) == 'r' || str.charAt(1) == 'R') &&\n(str.charAt(2) == 'u' || str.charAt(2) == 'U') &&\n(str.charAt(3) == 'e' || str.charAt(3) == 'E');\n}\nif (ch == 'T') {\nreturn\n(str.charAt(1) == 'R' || str.charAt(1) == 'r') &&\n(str.charAt(2) == 'U' || str.charAt(2) == 'u') &&\n(str.charAt(3) == 'E' || str.charAt(3) == 'e');\n}\n}\n}\nreturn false;\n}",
            "method_id": 0,
            "loc": 52
        }
    ]
}